!function(e){e.fn.draggableTouch=function(a,t){return"ontouchstart"in document.documentElement?"disable"==a?(this.unbind("touchstart.draggableTouch"),this.unbind("touchmove.draggableTouch"),this.unbind("touchend.draggableTouch"),this.unbind("touchcancel.draggableTouch"),this.trigger("dragdisabled"),this):(this.each(function(){var a=e(this),n=null,g=null;a.bind("touchstart.draggableTouch",function(t){var i=t.originalEvent;if(!g){g=i.changedTouches[0].identifier;var o=e(this).position();n={x:i.changedTouches[0].pageX-o.left,y:i.changedTouches[0].pageY-o.top},a.trigger("dragstart",o)}}),a.bind("touchmove.draggableTouch",function(i){i.preventDefault();for(var o=i.originalEvent,u=0;u<o.changedTouches.length;u++){var h=o.changedTouches[u];h.identifier==g&&(h.pageX-n.x>0&&h.pageX-n.x+a.width()<=t.width()&&e(this).css({left:h.pageX-n.x}),h.pageY-n.y>0&&h.pageY-n.y+a.height()<=t.height()&&e(this).css({top:h.pageY-n.y}))}}),a.bind("touchend.draggableTouch touchcancel.draggableTouch",function(e){e.preventDefault();for(var t=e.originalEvent,i=0;i<t.changedTouches.length;i++)t.changedTouches[i].identifier==g&&(a.trigger("dragend",{top:t.changedTouches[0].pageY-n.y,left:t.changedTouches[0].pageX-n.x}),g=null)})}),this):this.draggableMouse(a,t)},e.fn.draggableMouse=function(a,t){return"disable"==a?(this.unbind("mousedown.draggableTouch"),this.unbind("mouseup.draggableTouch"),e(document).unbind("mousemove.draggableTouch"),this.trigger("dragdisabled"),this):(this.each(function(){var a=e(this),n=null,g=function(e){e.pageX-n.x>0&&e.pageX-n.x+a.width()<=t.width()&&a.css({left:e.pageX-n.x}),e.pageY-n.y>0&&e.pageY-n.y+a.height()<=t.height()&&a.css({top:e.pageY-n.y})},i=function(t){a.unbind("mouseup.draggableTouch",i),e(document).unbind("mousemove.draggableTouch",g),a.trigger("dragend",{top:t.pageY-n.y,left:t.pageX-n.x})};a.bind("mousedown.draggableTouch",function(t){var o=a.position();n={x:t.pageX-o.left,y:t.pageY-o.top},e(document).bind("mousemove.draggableTouch",g),a.bind("mouseup.draggableTouch",i),a.trigger("dragstart",o),t.preventDefault()})}),this)}}(jQuery);